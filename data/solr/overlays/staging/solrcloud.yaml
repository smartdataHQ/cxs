apiVersion: solr.apache.org/v1beta1
kind: SolrCloud
metadata:
  name: solr
  namespace: data
spec:
  replicas: 2
  solrImage:
    repository: solr
    tag: 9.5.0
  zookeeperRef:
    connectionInfo:
      externalConnectionString: zookeeper.data.svc.cluster.local
  dataStorage:
    persistent:
      reclaimPolicy: Retain
      pvcTemplate:
        spec:
          resources:
            requests:
              storage: 20Gi
  updateStrategy:
    method: StatefulSet
  customSolrKubeOptions:
    podOptions:
      labels:
        app: solr
        app.kubernetes.io/instance: solr
        env: staging
      resources:
        requests:
          cpu: 500m
          memory: 2Gi
        limits:
          memory: 4Gi
