resources:
  - ../../base

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
  - name: kafka
    repo: oci://registry-1.docker.io/bitnamicharts
    namespace: data
    releaseName: kafka
    # SRC: https://github.com/bitnami/charts/blob/main/bitnami/kafka/values.yaml
    valuesInline:
      zookeeperChrootPath: kafka-staging
      replicaCount: 3 # Increase the number of replicas to 3
      
      controller:
        heapOpts: -Xmx400m -Xms200m

      externalZookeeper:
        servers: [zookeeper.data.svc.cluster.local]

      commonAnnotations:
        tailscale.com/expose: "true"
        tailscale.com/hostname: data-kafka-dev

namespace: data
