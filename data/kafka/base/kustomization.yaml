namespace: data


helmCharts:
  - name: kafka
    repo: oci://registry-1.docker.io/bitnamicharts
    version: 28.0.1
    namespace: data
    releaseName: kafka
    # valuesFile: kafka-production.values.yaml
    # SRC: https://github.com/bitnami/charts/blob/kafka/28.0.1/bitnami/kafka/values.yaml

    valuesInline:
      image:
        registry: docker.io
        repository: bitnamilegacy/kafka
      
      broker:
        replicaCount: 1 # Single broker deployment
        heapOpts: -Xmx4096m -Xms2048m # 4GB heap for single broker
        resources:
          limits:
            memory: 6Gi # 4GB heap + 2GB non-heap
            cpu: 2000m
          requests:
            memory: 4Gi
            cpu: 1000m
      controller:
        replicaCount: 0
      kraft:
        enabled: false
      # resourcesPreset: xlarge # Using custom resources instead

      externalZookeeper:
        servers: [zookeeper.data.svc.cluster.local]

      sasl:  # prevent the regeneration of kafka passwords
        existingSecret: "kafka-user-passwords"

