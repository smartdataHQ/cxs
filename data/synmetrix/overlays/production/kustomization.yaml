apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: synmetrix

resources:
  - ../../base

# Production-specific patches (simplified)
patches:
  - path: patches/cubejs-resources.yaml
    target:
      kind: Deployment
      name: synmetrix-cubejs
  - path: patches/hasura-resources.yaml
    target:
      kind: Deployment
      name: synmetrix-hasura
  - path: patches/enable-ingress.yaml
    target:
      kind: Ingress
      name: synmetrix

# Production-specific secret values (mixing envs and literals)
secretGenerator:
  - name: synmetrix-secrets
    envs:
      - synmetrix-secrets.env
    literals:
      - ENVIRONMENT=production
    behavior: replace

# Use Docker Hub images
images:
  - name: quicklookup/synmetrix-client
    newTag: latest
  - name: quicklookup/synmetrix-actions
    newTag: latest
  - name: quicklookup/synmetrix-cube
    newTag: latest 